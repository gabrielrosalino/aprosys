{% extends "logged_base.html" %}
{% load static %}

{% block title %}
  Aprova System | 
  {% if modo == 'cadastrar_aluno' %}Cadastrar Aluno
  {% elif modo == 'detalhes_aluno' %}Detalhes do Aluno
  {% else %}Editar Aluno{% endif %}
{% endblock %}

{% block content %}
<div class="report-header">
  <h3 class="report-subtitle">
    {% if modo == 'cadastrar_aluno' %}Cadastrar
    {% elif modo == 'detalhes_aluno' %}Detalhes do
    {% else %}Editar{% endif %}
  </h3>
  <h1 class="report-title">Aluno</h1>
  {% if aluno %}
    <a href="{% url 'editar_aluno' aluno.id %}">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" class="edit-button" alt="Botão editar">
        <path fill="currentColor" d="M439.5 107.8C447.1 100.2 457.3 96 468 96C478.7 96 488.9 100.2 496.5 107.8L532.2 143.5C539.8 151.1 544 161.3 544 172C544 182.7 539.8 192.9 532.2 200.5L473.7 259L381 166.3L439.5 107.8zM358.3 189L451 281.7L238.2 494.4C231.4 501.2 222.9 506.2 213.6 508.8L99.5 540.5L131.2 426.4C133.8 417.1 138.7 408.6 145.6 401.8L358.3 189zM468 64C448.8 64 430.4 71.6 416.9 85.2L122.9 379.2C112.2 389.9 104.4 403.3 100.3 417.9L64.9 545.6C62.6 553.9 64.9 562.9 71.1 569C77.3 575.1 86.2 577.5 94.5 575.2L222.3 539.7C236.9 535.6 250.2 527.9 261 517.1L555 223.1C568.4 209.6 576 191.2 576 172C576 152.8 568.4 134.4 554.8 120.9L519.1 85.2C505.6 71.6 487.2 64 468 64z"/>
      </svg>
    </a>
  {% endif %}
</div>

{% if form.errors %}
  <div class="alert alert-danger">
    <ul>
      {% for field in form %}{% for err in field.errors %}
        <li><strong>{{ field.label }}:</strong> {{ err }}</li>
      {% endfor %}{% endfor %}
      {% for err in form.non_field_errors %}<li>{{ err }}</li>{% endfor %}
    </ul>
  </div>
{% endif %}

<form method="post">
  {% csrf_token %}
  
  {% comment %}
    Aqui incluímos os campos do formulário a partir do seu arquivo parcial.
    Não precisamos mudar nada no _aluno_form_fields.html!
  {% endcomment %}
  {% include 'academico/alunos/aluno_form_fields.html' %}
  
  <div class="btn_wrapper">
    {% if modo == 'cadastrar_aluno' %}
      <button type="submit" class="btn btn-save">Cadastrar</button>
      <button type="reset" class="btn btn-cancel">Limpar</button>

    {% elif modo == 'editar_aluno' %}
      <button type="submit" class="btn btn-save">Salvar Alterações</button>
      <a href="{% url 'pesquisar_aluno' %}" class="btn btn-cancel">Cancelar</a>

    {% elif modo == 'detalhes_aluno' %}
      <a href="{% url 'pesquisar_aluno' %}" class="btn btn-cancel">Voltar</a>

    {% endif %}
  </div>
</form>
{% endblock %}